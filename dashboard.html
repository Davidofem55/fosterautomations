<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Med Spa Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-blue-50 to-pink-50 min-h-screen">
    
    <!-- Header -->
    <div class="bg-white shadow-lg border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
                        Med Spa Management
                    </h1>
                    <p class="text-gray-600 mt-1">Complete Lead Tracking System</p>
                </div>
                <div class="flex items-center gap-4">
                    <select id="timeRange" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                        <option value="7">Last 7 Days</option>
                        <option value="30">Last 30 Days</option>
                        <option value="90">Last 90 Days</option>
                    </select>
                    <button onclick="refreshData()" class="flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                        Refresh
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="bg-white shadow border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex gap-8">
                <button onclick="showTab('dashboard')" id="tab-dashboard" class="flex items-center gap-2 px-4 py-4 border-b-2 border-purple-600 text-purple-600">
                    <i data-lucide="trending-up" class="w-5 h-5"></i>
                    Dashboard
                </button>
                <button onclick="showTab('leads')" id="tab-leads" class="flex items-center gap-2 px-4 py-4 border-b-2 border-transparent text-gray-600 hover:text-gray-900">
                    <i data-lucide="users" class="w-5 h-5"></i>
                    Leads
                </button>
                <button onclick="showTab('activity')" id="tab-activity" class="flex items-center gap-2 px-4 py-4 border-b-2 border-transparent text-gray-600 hover:text-gray-900">
                    <i data-lucide="activity" class="w-5 h-5"></i>
                    Activity
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-6 py-8">
        
        <!-- Dashboard View -->
        <div id="dashboard-view">
            <!-- Stats Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6 border-l-4" style="border-left-color: #667eea">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <p class="text-gray-500 text-sm font-medium mb-1">Total Leads</p>
                            <h3 class="text-3xl font-bold mb-1" style="color: #667eea" id="stat-total">0</h3>
                            <p class="text-sm text-gray-600">All time</p>
                        </div>
                        <div class="p-4 rounded-full" style="background-color: #667eea15">
                            <i data-lucide="users" class="w-8 h-8" style="color: #667eea"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 border-l-4" style="border-left-color: #f59e0b">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <p class="text-gray-500 text-sm font-medium mb-1">New Leads</p>
                            <h3 class="text-3xl font-bold mb-1" style="color: #f59e0b" id="stat-new">0</h3>
                            <p class="text-sm text-gray-600">Awaiting contact</p>
                        </div>
                        <div class="p-4 rounded-full" style="background-color: #f59e0b15">
                            <i data-lucide="clock" class="w-8 h-8" style="color: #f59e0b"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 border-l-4" style="border-left-color: #10b981">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <p class="text-gray-500 text-sm font-medium mb-1">Booked</p>
                            <h3 class="text-3xl font-bold mb-1" style="color: #10b981" id="stat-booked">0</h3>
                            <p class="text-sm text-gray-600">Consultations</p>
                        </div>
                        <div class="p-4 rounded-full" style="background-color: #10b98115">
                            <i data-lucide="check-circle" class="w-8 h-8" style="color: #10b981"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 border-l-4" style="border-left-color: #8b5cf6">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <p class="text-gray-500 text-sm font-medium mb-1">Conversion</p>
                            <h3 class="text-3xl font-bold mb-1" style="color: #8b5cf6" id="stat-conversion">0%</h3>
                            <p class="text-sm text-gray-600" id="stat-response">Avg response: 0h</p>
                        </div>
                        <div class="p-4 rounded-full" style="background-color: #8b5cf615">
                            <i data-lucide="trending-up" class="w-8 h-8" style="color: #8b5cf6"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Placeholder -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Recent Leads</h3>
                    <div id="recent-leads-list" class="space-y-3">
                        <!-- Recent leads will be inserted here -->
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Treatment Breakdown</h3>
                    <div id="treatment-breakdown" class="space-y-2">
                        <!-- Treatment stats will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Status Pipeline -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4">Lead Status Pipeline</h3>
                <div id="status-pipeline" class="grid grid-cols-5 gap-4">
                    <!-- Status counts will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Leads View -->
        <div id="leads-view" class="hidden">
            <!-- Search and Filter -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="relative">
                        <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"></i>
                        <input
                            type="text"
                            id="search-input"
                            placeholder="Search by name, email, or phone..."
                            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                            oninput="filterLeads()"
                        />
                    </div>
                    
                    <select id="status-filter" onchange="filterLeads()" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                        <option value="all">All Statuses</option>
                        <option value="New">New</option>
                        <option value="Contacted">Contacted</option>
                        <option value="Qualified">Qualified</option>
                        <option value="Booked">Booked</option>
                        <option value="Lost">Lost</option>
                    </select>
                    
                    <button onclick="exportData()" class="flex items-center justify-center gap-2 px-4 py-2 gradient-bg text-white rounded-lg hover:shadow-lg transition-all">
                        <i data-lucide="download" class="w-5 h-5"></i>
                        Export CSV
                    </button>
                </div>
            </div>

            <!-- Leads Table -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="gradient-bg text-white">
                            <tr>
                                <th class="px-6 py-4 text-left text-sm font-semibold">Name</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold">Contact</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold">Treatment</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold">Status</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold">Availability</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold">Date</th>
                            </tr>
                        </thead>
                        <tbody id="leads-table-body" class="divide-y divide-gray-200">
                            <!-- Leads will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Activity View -->
        <div id="activity-view" class="hidden">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-lg font-bold text-gray-800 mb-6">Recent Activity</h3>
                <div id="activity-list" class="space-y-4">
                    <div class="text-center py-12">
                        <i data-lucide="bell" class="w-12 h-12 mx-auto text-gray-300 mb-4"></i>
                        <p class="text-gray-500">No recent activity</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Sample data storage
        let allLeads = [];
        let filteredLeads = [];

        // Generate sample data
        function generateSampleData() {
            const treatments = ['Botox', 'Dermal Fillers', 'Laser Treatment', 'Medical Facials', 'Chemical Peels'];
            const statuses = ['New', 'Contacted', 'Qualified', 'Booked', 'Lost'];
            const names = ['Sarah Johnson', 'Michael Chen', 'Emma Davis', 'James Wilson', 'Olivia Brown', 
                          'Liam Taylor', 'Sophia Martinez', 'Noah Anderson', 'Ava Thomas', 'Ethan Moore',
                          'Isabella Garcia', 'Mason Rodriguez', 'Mia Hernandez', 'Lucas Lopez', 'Charlotte Lee'];
            
            allLeads = Array.from({ length: 25 }, (_, i) => ({
                id: `lead-${i + 1}`,
                name: names[i % names.length],
                email: `${names[i % names.length].toLowerCase().replace(' ', '.')}@example.com`,
                phone: `+234 ${Math.floor(800 + Math.random() * 99)} ${Math.floor(100 + Math.random() * 899)} ${Math.floor(1000 + Math.random() * 8999)}`,
                treatment: treatments[Math.floor(Math.random() * treatments.length)],
                status: statuses[Math.floor(Math.random() * statuses.length)],
                availability: ['Morning', 'Afternoon', 'Evening'][Math.floor(Math.random() * 3)],
                source: 'Landing page',
                message: 'Interested in consultation',
                created: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString()
            }));
            
            filteredLeads = [...allLeads];
        }

        // Calculate and update stats
        function updateStats() {
            const statusCounts = allLeads.reduce((acc, lead) => {
                acc[lead.status] = (acc[lead.status] || 0) + 1;
                return acc;
            }, {});

            const total = allLeads.length;
            const newLeads = statusCounts['New'] || 0;
            const booked = statusCounts['Booked'] || 0;
            const conversionRate = total > 0 ? ((booked / total) * 100).toFixed(1) : 0;

            document.getElementById('stat-total').textContent = total;
            document.getElementById('stat-new').textContent = newLeads;
            document.getElementById('stat-booked').textContent = booked;
            document.getElementById('stat-conversion').textContent = `${conversionRate}%`;

            // Update recent leads
            const recentLeadsList = document.getElementById('recent-leads-list');
            const recentLeads = allLeads.slice(-5).reverse();
            recentLeadsList.innerHTML = recentLeads.map(lead => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-medium text-gray-900">${lead.name}</p>
                        <p class="text-sm text-gray-600">${lead.treatment}</p>
                    </div>
                    <span class="px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(lead.status)}">
                        ${lead.status}
                    </span>
                </div>
            `).join('');

            // Update treatment breakdown
            const treatmentCounts = allLeads.reduce((acc, lead) => {
                acc[lead.treatment] = (acc[lead.treatment] || 0) + 1;
                return acc;
            }, {});
            
            const treatmentBreakdown = document.getElementById('treatment-breakdown');
            treatmentBreakdown.innerHTML = Object.entries(treatmentCounts).map(([treatment, count]) => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <span class="text-gray-700">${treatment}</span>
                    <span class="font-bold text-purple-600">${count}</span>
                </div>
            `).join('');

            // Update status pipeline
            const statusPipeline = document.getElementById('status-pipeline');
            const statuses = ['New', 'Contacted', 'Qualified', 'Booked', 'Lost'];
            statusPipeline.innerHTML = statuses.map(status => `
                <div class="text-center p-4 bg-gray-50 rounded-lg">
                    <div class="text-2xl font-bold ${getStatusTextColor(status)} mb-1">
                        ${statusCounts[status] || 0}
                    </div>
                    <div class="text-sm text-gray-600">${status}</div>
                </div>
            `).join('');
        }

        // Get status color classes
        function getStatusColor(status) {
            const colors = {
                'New': 'bg-blue-100 text-blue-800',
                'Contacted': 'bg-yellow-100 text-yellow-800',
                'Qualified': 'bg-purple-100 text-purple-800',
                'Booked': 'bg-green-100 text-green-800',
                'Lost': 'bg-red-100 text-red-800'
            };
            return colors[status] || 'bg-gray-100 text-gray-800';
        }

        function getStatusTextColor(status) {
            const colors = {
                'New': 'text-blue-600',
                'Contacted': 'text-yellow-600',
                'Qualified': 'text-purple-600',
                'Booked': 'text-green-600',
                'Lost': 'text-red-600'
            };
            return colors[status] || 'text-gray-600';
        }

        // Update leads table
        function updateLeadsTable() {
            const tbody = document.getElementById('leads-table-body');
            tbody.innerHTML = filteredLeads.map(lead => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4">
                        <div class="font-medium text-gray-900">${lead.name}</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-700">${lead.email}</div>
                        <div class="text-sm text-gray-500">${lead.phone}</div>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-700">${lead.treatment}</td>
                    <td class="px-6 py-4">
                        <select onchange="updateLeadStatus('${lead.id}', this.value)" class="px-3 py-1 rounded-full text-xs font-medium border-0 cursor-pointer ${getStatusColor(lead.status)}">
                            <option value="New" ${lead.status === 'New' ? 'selected' : ''}>New</option>
                            <option value="Contacted" ${lead.status === 'Contacted' ? 'selected' : ''}>Contacted</option>
                            <option value="Qualified" ${lead.status === 'Qualified' ? 'selected' : ''}>Qualified</option>
                            <option value="Booked" ${lead.status === 'Booked' ? 'selected' : ''}>Booked</option>
                            <option value="Lost" ${lead.status === 'Lost' ? 'selected' : ''}>Lost</option>
                        </select>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-700">${lead.availability}</td>
                    <td class="px-6 py-4 text-sm text-gray-600">${new Date(lead.created).toLocaleDateString()}</td>
                </tr>
            `).join('');
        }

        // Filter leads
        function filterLeads() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const statusFilter = document.getElementById('status-filter').value;

            filteredLeads = allLeads.filter(lead => {
                const matchesSearch = !searchTerm || 
                    lead.name.toLowerCase().includes(searchTerm) ||
                    lead.email.toLowerCase().includes(searchTerm) ||
                    lead.phone.includes(searchTerm);
                
                const matchesStatus = statusFilter === 'all' || lead.status === statusFilter;

                return matchesSearch && matchesStatus;
            });

            updateLeadsTable();
        }

        // Update lead status
        function updateLeadStatus(leadId, newStatus) {
            const lead = allLeads.find(l => l.id === leadId);
            if (lead) {
                lead.status = newStatus;
                updateStats();
                filterLeads();
                alert(`Lead ${lead.name} updated to ${newStatus}`);
            }
        }

        // Export data
        function exportData() {
            const csv = [
                ['Name', 'Email', 'Phone', 'Treatment', 'Status', 'Availability', 'Created'],
                ...allLeads.map(lead => [
                    lead.name,
                    lead.email,
                    lead.phone,
                    lead.treatment,
                    lead.status,
                    lead.availability,
                    new Date(lead.created).toLocaleDateString()
                ])
            ].map(row => row.join(',')).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `medspa-leads-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            alert('Data exported successfully!');
        }

        // Show tab
        function showTab(tabName) {
            // Hide all views
            document.getElementById('dashboard-view').classList.add('hidden');
            document.getElementById('leads-view').classList.add('hidden');
            document.getElementById('activity-view').classList.add('hidden');

            // Remove active class from all tabs
            document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                tab.classList.remove('border-purple-600', 'text-purple-600');
                tab.classList.add('border-transparent', 'text-gray-600');
            });

            // Show selected view
            document.getElementById(`${tabName}-view`).classList.remove('hidden');

            // Add active class to selected tab
            const activeTab = document.getElementById(`tab-${tabName}`);
            activeTab.classList.remove('border-transparent', 'text-gray-600');
            activeTab.classList.add('border-purple-600', 'text-purple-600');

            // Refresh icons
            lucide.createIcons();
        }

        // Refresh data
        function refreshData() {
            generateSampleData();
            updateStats();
            filterLeads();
            alert('Data refreshed!');
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            generateSampleData();
            updateStats();
            updateLeadsTable();
            lucide.createIcons();
        });
    </script>
</body>
</html>